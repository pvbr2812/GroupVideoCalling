{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseRequestPolicy } from \"./requestPolicy\";\nexport var DefaultKeepAliveOptions = {\n  enable: true\n};\nexport function keepAlivePolicy(keepAliveOptions) {\n  return {\n    create: function (nextPolicy, options) {\n      return new KeepAlivePolicy(nextPolicy, options, keepAliveOptions || DefaultKeepAliveOptions);\n    }\n  };\n}\n/**\n * KeepAlivePolicy is a policy used to control keep alive settings for every request.\n */\n\nvar KeepAlivePolicy =\n/** @class */\nfunction (_super) {\n  __extends(KeepAlivePolicy, _super);\n  /**\n   * Creates an instance of KeepAlivePolicy.\n   *\n   * @param nextPolicy -\n   * @param options -\n   * @param keepAliveOptions -\n   */\n\n\n  function KeepAlivePolicy(nextPolicy, options, keepAliveOptions) {\n    var _this = _super.call(this, nextPolicy, options) || this;\n\n    _this.keepAliveOptions = keepAliveOptions;\n    return _this;\n  }\n  /**\n   * Sends out request.\n   *\n   * @param request -\n   * @returns\n   */\n\n\n  KeepAlivePolicy.prototype.sendRequest = function (request) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        request.keepAlive = this.keepAliveOptions.enable;\n        return [2\n        /*return*/\n        , this._nextPolicy.sendRequest(request)];\n      });\n    });\n  };\n\n  return KeepAlivePolicy;\n}(BaseRequestPolicy);\n\nexport { KeepAlivePolicy };","map":{"version":3,"sources":["../../../src/policies/keepAlivePolicy.ts"],"names":[],"mappings":"AAAA;AACA;;AAEA,SACE,iBADF,QAKO,iBALP;AAqBA,OAAO,IAAM,uBAAuB,GAAqB;AACvD,EAAA,MAAM,EAAE;AAD+C,CAAlD;AAIP,OAAM,SAAU,eAAV,CAA0B,gBAA1B,EAA6D;AACjE,SAAO;AACL,IAAA,MAAM,EAAE,UAAC,UAAD,EAA4B,OAA5B,EAAyD;AAC/D,aAAO,IAAI,eAAJ,CAAoB,UAApB,EAAgC,OAAhC,EAAyC,gBAAgB,IAAI,uBAA7D,CAAP;AACD;AAHI,GAAP;AAKD;AAED;;AAEG;;AACH,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAqC,EAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;AACnC;;;;;;AAMG;;;AACH,WAAA,eAAA,CACE,UADF,EAEE,OAFF,EAGmB,gBAHnB,EAGqD;AAHrD,QAAA,KAAA,GAKE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,UAAN,EAAkB,OAAlB,KAA0B,IAL5B;;AAGmB,IAAA,KAAA,CAAA,gBAAA,GAAA,gBAAA;;AAGlB;AAED;;;;;AAKG;;;AACU,EAAA,eAAA,CAAA,SAAA,CAAA,WAAA,GAAb,UAAyB,OAAzB,EAAiD;;;AAC/C,QAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,gBAAL,CAAsB,MAA1C;AACA,eAAA,CAAA;AAAA;AAAA,UAAO,KAAK,WAAL,CAAiB,WAAjB,CAA6B,OAA7B,CAAP,CAAA;;;AACD,GAHY;;AAIf,SAAA,eAAA;AAAC,CA1BD,CAAqC,iBAArC,CAAA","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  BaseRequestPolicy,\n  RequestPolicy,\n  RequestPolicyOptions,\n  RequestPolicyFactory\n} from \"./requestPolicy\";\nimport { WebResourceLike } from \"../webResource\";\nimport { HttpOperationResponse } from \"../httpOperationResponse\";\n\n/**\n * Options for how HTTP connections should be maintained for future\n * requests.\n */\nexport interface KeepAliveOptions {\n  /*\n   * When true, connections will be kept alive for multiple requests.\n   * Defaults to true.\n   */\n  enable: boolean;\n}\n\nexport const DefaultKeepAliveOptions: KeepAliveOptions = {\n  enable: true\n};\n\nexport function keepAlivePolicy(keepAliveOptions?: KeepAliveOptions): RequestPolicyFactory {\n  return {\n    create: (nextPolicy: RequestPolicy, options: RequestPolicyOptions) => {\n      return new KeepAlivePolicy(nextPolicy, options, keepAliveOptions || DefaultKeepAliveOptions);\n    }\n  };\n}\n\n/**\n * KeepAlivePolicy is a policy used to control keep alive settings for every request.\n */\nexport class KeepAlivePolicy extends BaseRequestPolicy {\n  /**\n   * Creates an instance of KeepAlivePolicy.\n   *\n   * @param nextPolicy -\n   * @param options -\n   * @param keepAliveOptions -\n   */\n  constructor(\n    nextPolicy: RequestPolicy,\n    options: RequestPolicyOptions,\n    private readonly keepAliveOptions: KeepAliveOptions\n  ) {\n    super(nextPolicy, options);\n  }\n\n  /**\n   * Sends out request.\n   *\n   * @param request -\n   * @returns\n   */\n  public async sendRequest(request: WebResourceLike): Promise<HttpOperationResponse> {\n    request.keepAlive = this.keepAliveOptions.enable;\n    return this._nextPolicy.sendRequest(request);\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}