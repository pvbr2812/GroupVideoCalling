{"ast":null,"code":"import { RULE_TYPE } from 'fela-utils'; // @ts-ignore\n\nimport _Stylis from 'stylis'; // `stylis@3` is a CJS library, there are known issues with them:\n// https://github.com/rollup/rollup/issues/1267#issuecomment-446681320\n\nvar Stylis = _Stylis.default || _Stylis; // We use Stylis only for vendor prefixing, all other capabilities are disabled\n\nvar stylis = new Stylis({\n  cascade: false,\n  compress: false,\n  global: false,\n  keyframe: false,\n  preserve: false,\n  semicolon: false\n});\nexport var felaStylisEnhancer = function felaStylisEnhancer(renderer) {\n  var existingEmitChange = renderer._emitChange.bind(renderer);\n\n  renderer._emitChange = function (change) {\n    if (change.type === RULE_TYPE) {\n      var prefixed = stylis('', change.declaration); // Fela uses objects by references, it's safe to override properties\n\n      change.declaration = prefixed.slice(1, -1);\n    }\n\n    existingEmitChange(change);\n  };\n\n  return renderer;\n};","map":{"version":3,"sources":["felaStylisEnhancer.ts"],"names":["Stylis","_Stylis","stylis","cascade","compress","global","keyframe","preserve","semicolon","felaStylisEnhancer","existingEmitChange","renderer","change","prefixed"],"mappings":"AAAA,SAAA,SAAA,QAAA,YAAA,C,CACA;;AACA,OAAA,OAAA,MAAA,QAAA,C,CAIA;AACA;;AACA,IAAMA,MAAM,GAAIC,OAAD,CAAA,OAACA,IAAhB,OAAA,C,CAEA;;AACA,IAAMC,MAAM,GAAG,IAAA,MAAA,CAAW;AACxBC,EAAAA,OAAO,EADiB,KAAA;AAExBC,EAAAA,QAAQ,EAFgB,KAAA;AAGxBC,EAAAA,MAAM,EAHkB,KAAA;AAIxBC,EAAAA,QAAQ,EAJgB,KAAA;AAKxBC,EAAAA,QAAQ,EALgB,KAAA;AAMxBC,EAAAA,SAAS,EAAE;AANa,CAAX,CAAf;AASA,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,QAAA,EAA4B;AAC5D,MAAMC,kBAAkB,GAAGC,QAAQ,CAARA,WAAAA,CAAAA,IAAAA,CAA3B,QAA2BA,CAA3B;;AAEAA,EAAAA,QAAQ,CAARA,WAAAA,GAAuB,UAAA,MAAA,EAAgC;AACrD,QAAIC,MAAM,CAANA,IAAAA,KAAJ,SAAA,EAA+B;AAC7B,UAAMC,QAAgB,GAAGX,MAAM,CAAA,EAAA,EAAKU,MAAM,CADb,WACE,CAA/B,CAD6B,CAG7B;;AACAA,MAAAA,MAAM,CAANA,WAAAA,GAAqBC,QAAQ,CAARA,KAAAA,CAAAA,CAAAA,EAAkB,CAAvCD,CAAqBC,CAArBD;AACD;;AAEDF,IAAAA,kBAAkB,CAAlBA,MAAkB,CAAlBA;AARFC,GAAAA;;AAWA,SAAA,QAAA;AAdK,CAAA","sourcesContent":["import { RULE_TYPE } from 'fela-utils';\n// @ts-ignore\nimport _Stylis from 'stylis';\n\nimport { FelaRenderer, FelaRendererChange } from './types';\n\n// `stylis@3` is a CJS library, there are known issues with them:\n// https://github.com/rollup/rollup/issues/1267#issuecomment-446681320\nconst Stylis = (_Stylis as any).default || _Stylis;\n\n// We use Stylis only for vendor prefixing, all other capabilities are disabled\nconst stylis = new Stylis({\n  cascade: false,\n  compress: false,\n  global: false,\n  keyframe: false,\n  preserve: false,\n  semicolon: false,\n});\n\nexport const felaStylisEnhancer = (renderer: FelaRenderer) => {\n  const existingEmitChange = renderer._emitChange.bind(renderer);\n\n  renderer._emitChange = (change: FelaRendererChange) => {\n    if (change.type === RULE_TYPE) {\n      const prefixed: string = stylis('', change.declaration);\n\n      // Fela uses objects by references, it's safe to override properties\n      change.declaration = prefixed.slice(1, -1);\n    }\n\n    existingEmitChange(change);\n  };\n\n  return renderer;\n};\n"]},"metadata":{},"sourceType":"module"}