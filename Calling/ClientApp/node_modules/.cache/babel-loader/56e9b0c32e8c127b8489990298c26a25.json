{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { AzureKeyCredential } from \"@azure/core-auth\"; // TODO: update when connection string format is finalized\n\nconst CONNECTION_STRING_REGEX = /endpoint=(.*);accesskey=(.*)/i;\n\nconst tryParseConnectionString = s => {\n  const match = s.match(CONNECTION_STRING_REGEX);\n\n  if ((match === null || match === void 0 ? void 0 : match[1]) && match[2]) {\n    return {\n      endpoint: match[1],\n      credential: new AzureKeyCredential(match[2])\n    };\n  }\n\n  return undefined;\n};\n/**\n * Returns an EndpointCredential to easily access properties of the connection string.\n * @hidden\n *\n * @param connectionString - The connection string to parse\n * @returns Object to access the endpoint and the credenials\n */\n\n\nexport const parseConnectionString = connectionString => {\n  const parsedConnectionString = tryParseConnectionString(connectionString);\n\n  if (parsedConnectionString) {\n    return parsedConnectionString;\n  } else {\n    throw new Error(`Invalid connection string ${connectionString}`);\n  }\n};","map":{"version":3,"sources":["../../../src/credential/connectionString.ts"],"names":[],"mappings":"AAAA;AACA;AAEA,SAAS,kBAAT,QAAkD,kBAAlD,C,CAiBA;;AACA,MAAM,uBAAuB,GAAG,+BAAhC;;AAEA,MAAM,wBAAwB,GAAI,CAAD,IAA8C;AAC7E,QAAM,KAAK,GAAG,CAAC,CAAC,KAAF,CAAQ,uBAAR,CAAd;;AACA,MAAI,CAAA,KAAK,KAAA,IAAL,IAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAA,KAAK,CAAG,CAAH,CAAL,KAAc,KAAK,CAAC,CAAD,CAAvB,EAA4B;AAC1B,WAAO;AAAE,MAAA,QAAQ,EAAE,KAAK,CAAC,CAAD,CAAjB;AAAsB,MAAA,UAAU,EAAE,IAAI,kBAAJ,CAAuB,KAAK,CAAC,CAAD,CAA5B;AAAlC,KAAP;AACD;;AACD,SAAO,SAAP;AACD,CAND;AAOA;;;;;;AAMG;;;AACH,OAAO,MAAM,qBAAqB,GAAI,gBAAD,IAAiD;AACpF,QAAM,sBAAsB,GAAG,wBAAwB,CAAC,gBAAD,CAAvD;;AACA,MAAI,sBAAJ,EAA4B;AAC1B,WAAO,sBAAP;AACD,GAFD,MAEO;AACL,UAAM,IAAI,KAAJ,CAAU,6BAA6B,gBAAgB,EAAvD,CAAN;AACD;AACF,CAPM","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { AzureKeyCredential, KeyCredential } from \"@azure/core-auth\";\n/**\n * Represents different properties of connection string\n * using format \"/endpoint=(.*);accesskey=(.*)\".\n * @hidden\n */\nexport interface EndpointCredential {\n  /**\n   * The endpoint as string\n   */\n  endpoint: string;\n  /**\n   * The access key represented as a KeyCredential object\n   */\n  credential: KeyCredential;\n}\n\n// TODO: update when connection string format is finalized\nconst CONNECTION_STRING_REGEX = /endpoint=(.*);accesskey=(.*)/i;\n\nconst tryParseConnectionString = (s: string): EndpointCredential | undefined => {\n  const match = s.match(CONNECTION_STRING_REGEX);\n  if (match?.[1] && match[2]) {\n    return { endpoint: match[1], credential: new AzureKeyCredential(match[2]) };\n  }\n  return undefined;\n};\n/**\n * Returns an EndpointCredential to easily access properties of the connection string.\n * @hidden\n *\n * @param connectionString - The connection string to parse\n * @returns Object to access the endpoint and the credenials\n */\nexport const parseConnectionString = (connectionString: string): EndpointCredential => {\n  const parsedConnectionString = tryParseConnectionString(connectionString);\n  if (parsedConnectionString) {\n    return parsedConnectionString;\n  } else {\n    throw new Error(`Invalid connection string ${connectionString}`);\n  }\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}