{"ast":null,"code":"import * as React from 'react';\nexport var useDispatchEffect = function useDispatchEffect(dispatchEffect) {\n  var latestEffect = React.useRef(dispatchEffect);\n  var latestEvent = React.useRef(null);\n  latestEffect.current = dispatchEffect;\n  var dispatch = React.useCallback(function (e, action) {\n    latestEvent.current = e;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    action.apply(void 0, args);\n    latestEvent.current = null;\n  }, []);\n  var sideEffect = React.useCallback(function (prevState, nextState) {\n    return latestEffect.current(latestEvent.current, prevState, nextState);\n  }, []);\n  return [dispatch, sideEffect];\n};","map":{"version":3,"sources":["hooks/useDispatchEffect.ts"],"names":["useDispatchEffect","latestEffect","React","latestEvent","dispatch","args","action","sideEffect"],"mappings":"AACA,OAAO,KAAP,KAAA,MAAA,OAAA;AAQA,OAAO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,cAAA,EAEc;AAC7C,MAAMC,YAAY,GAAGC,KAAK,CAALA,MAAAA,CAArB,cAAqBA,CAArB;AACA,MAAMC,WAAW,GAAGD,KAAK,CAALA,MAAAA,CAApB,IAAoBA,CAApB;AAEAD,EAAAA,YAAY,CAAZA,OAAAA,GAAAA,cAAAA;AAEA,MAAMG,QAAQ,GAAG,KAAK,CAAL,WAAA,CAAuC,UAAA,CAAA,EAAA,MAAA,EAAwB;AAC9ED,IAAAA,WAAW,CAAXA,OAAAA,GAAAA,CAAAA;;AAD8E,SAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAATE,IAAS,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAATA,MAAAA,IAAS,CAAA,IAAA,GAAA,CAAA,CAATA,GAAS,SAAA,CAAA,IAAA,CAATA;AAAS;;AAG9EC,IAAAA,MAAM,CAANA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,IAAAA;AACAH,IAAAA,WAAW,CAAXA,OAAAA,GAAAA,IAAAA;AAJe,GAAA,EAAjB,EAAiB,CAAjB;AAMA,MAAMI,UAAU,GAAG,KAAK,CAAL,WAAA,CAAqC,UAAA,SAAA,EAAA,SAAA,EAA0B;AAChF,WAAON,YAAY,CAAZA,OAAAA,CAAqBE,WAAW,CAAhCF,OAAAA,EAAAA,SAAAA,EAAP,SAAOA,CAAP;AADiB,GAAA,EAAnB,EAAmB,CAAnB;AAIA,SAAO,CAAA,QAAA,EAAP,UAAO,CAAP;AAlBK,CAAA","sourcesContent":["import { AnyAction, SideEffect } from '@fluentui/state';\nimport * as React from 'react';\n\ntype Dispatch<Action extends AnyAction> = (e: DispatchEvent, action: Action, ...args: Parameters<Action>) => void;\n\ntype DispatchEffect<State> = (e: DispatchEvent, prevState: State, nextState: State) => void;\n\ntype DispatchEvent = React.SyntheticEvent | Event;\n\nexport const useDispatchEffect = <State>(\n  dispatchEffect: DispatchEffect<State>,\n): [Dispatch<AnyAction>, SideEffect<State>] => {\n  const latestEffect = React.useRef<DispatchEffect<State>>(dispatchEffect);\n  const latestEvent = React.useRef<DispatchEvent | null>(null);\n\n  latestEffect.current = dispatchEffect;\n\n  const dispatch = React.useCallback<Dispatch<AnyAction>>((e, action, ...args) => {\n    latestEvent.current = e;\n\n    action(...args);\n    latestEvent.current = null;\n  }, []);\n  const sideEffect = React.useCallback<SideEffect<State>>((prevState, nextState) => {\n    return latestEffect.current(latestEvent.current as DispatchEvent, prevState, nextState);\n  }, []);\n\n  return [dispatch, sideEffect];\n};\n"]},"metadata":{},"sourceType":"module"}