{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { __extends } from \"tslib\";\nimport { CanonicalCode } from \"@opentelemetry/api\";\nimport { NoOpSpan } from \"../noop/noOpSpan\";\n/**\n * A mock span useful for testing.\n */\n\nvar TestSpan =\n/** @class */\nfunction (_super) {\n  __extends(TestSpan, _super);\n  /**\n   * Starts a new Span.\n   * @param parentTracer The tracer that created this Span\n   * @param name The name of the span.\n   * @param context The SpanContext this span belongs to\n   * @param kind The SpanKind of this Span\n   * @param parentSpanId The identifier of the parent Span\n   * @param startTime The startTime of the event (defaults to now)\n   */\n\n\n  function TestSpan(parentTracer, name, context, kind, parentSpanId, startTime) {\n    if (startTime === void 0) {\n      startTime = Date.now();\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._tracer = parentTracer;\n    _this.name = name;\n    _this.kind = kind;\n    _this.startTime = startTime;\n    _this.parentSpanId = parentSpanId;\n    _this.status = {\n      code: CanonicalCode.OK\n    };\n    _this.endCalled = false;\n    _this._context = context;\n    _this.attributes = {};\n    return _this;\n  }\n  /**\n   * Returns the Tracer that created this Span\n   */\n\n\n  TestSpan.prototype.tracer = function () {\n    return this._tracer;\n  };\n  /**\n   * Returns the SpanContext associated with this Span.\n   */\n\n\n  TestSpan.prototype.context = function () {\n    return this._context;\n  };\n  /**\n   * Marks the end of Span execution.\n   * @param _endTime The time to use as the Span's end time. Defaults to\n   * the current time.\n   */\n\n\n  TestSpan.prototype.end = function (_endTime) {\n    this.endCalled = true;\n  };\n  /**\n   * Sets a status on the span. Overrides the default of CanonicalCode.OK.\n   * @param status The status to set.\n   */\n\n\n  TestSpan.prototype.setStatus = function (status) {\n    this.status = status;\n    return this;\n  };\n  /**\n   * Returns whether this span will be recorded\n   */\n\n\n  TestSpan.prototype.isRecording = function () {\n    return true;\n  };\n  /**\n   * Sets an attribute on the Span\n   * @param key the attribute key\n   * @param value the attribute value\n   */\n\n\n  TestSpan.prototype.setAttribute = function (key, value) {\n    this.attributes[key] = value;\n    return this;\n  };\n  /**\n   * Sets attributes on the Span\n   * @param attributes the attributes to add\n   */\n\n\n  TestSpan.prototype.setAttributes = function (attributes) {\n    for (var _i = 0, _a = Object.keys(attributes); _i < _a.length; _i++) {\n      var key = _a[_i];\n      this.attributes[key] = attributes[key];\n    }\n\n    return this;\n  };\n\n  return TestSpan;\n}(NoOpSpan);\n\nexport { TestSpan };","map":{"version":3,"sources":["../../../../src/tracers/test/testSpan.ts"],"names":[],"mappings":"AAAA;AACA;;AAEA,SAME,aANF,QAQO,oBARP;AASA,SAAS,QAAT,QAAyB,kBAAzB;AAEA;;AAEG;;AACH,IAAA,QAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA8B,EAAA,SAAA,CAAA,QAAA,EAAA,MAAA,CAAA;AAuC5B;;;;;;;;AAQG;;;AACH,WAAA,QAAA,CACE,YADF,EAEE,IAFF,EAGE,OAHF,EAIE,IAJF,EAKE,YALF,EAME,SANF,EAMmC;AAAjC,QAAA,SAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,SAAA,GAAuB,IAAI,CAAC,GAAL,EAAvB;AAAiC;;AANnC,QAAA,KAAA,GAQE,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IART;;AASE,IAAA,KAAI,CAAC,OAAL,GAAe,YAAf;AACA,IAAA,KAAI,CAAC,IAAL,GAAY,IAAZ;AACA,IAAA,KAAI,CAAC,IAAL,GAAY,IAAZ;AACA,IAAA,KAAI,CAAC,SAAL,GAAiB,SAAjB;AACA,IAAA,KAAI,CAAC,YAAL,GAAoB,YAApB;AACA,IAAA,KAAI,CAAC,MAAL,GAAc;AACZ,MAAA,IAAI,EAAE,aAAa,CAAC;AADR,KAAd;AAGA,IAAA,KAAI,CAAC,SAAL,GAAiB,KAAjB;AACA,IAAA,KAAI,CAAC,QAAL,GAAgB,OAAhB;AACA,IAAA,KAAI,CAAC,UAAL,GAAkB,EAAlB;;AACD;AAED;;AAEG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE,WAAO,KAAK,OAAZ;AACD,GAFD;AAIA;;AAEG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACE,WAAO,KAAK,QAAZ;AACD,GAFD;AAIA;;;;AAIG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,QAAJ,EAAqB;AACnB,SAAK,SAAL,GAAiB,IAAjB;AACD,GAFD;AAIA;;;AAGG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAAwB;AACtB,SAAK,MAAL,GAAc,MAAd;AACA,WAAO,IAAP;AACD,GAHD;AAKA;;AAEG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACE,WAAO,IAAP;AACD,GAFD;AAIA;;;;AAIG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,GAAb,EAA0B,KAA1B,EAAwC;AACtC,SAAK,UAAL,CAAgB,GAAhB,IAAuB,KAAvB;AACA,WAAO,IAAP;AACD,GAHD;AAKA;;;AAGG;;;AACH,EAAA,QAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,UAAd,EAAoC;AAClC,SAAkB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,UAAZ,CAAlB,EAAkB,EAAA,GAAA,EAAA,CAAA,MAAlB,EAAkB,EAAA,EAAlB,EAA2C;AAAtC,UAAM,GAAG,GAAA,EAAA,CAAA,EAAA,CAAT;AACH,WAAK,UAAL,CAAgB,GAAhB,IAAuB,UAAU,CAAC,GAAD,CAAjC;AACD;;AACD,WAAO,IAAP;AACD,GALD;;AAMF,SAAA,QAAA;AAAC,CAjID,CAA8B,QAA9B,CAAA","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  TimeInput,\n  Tracer,\n  SpanKind,\n  Status,\n  SpanContext,\n  CanonicalCode,\n  Attributes\n} from \"@opentelemetry/api\";\nimport { NoOpSpan } from \"../noop/noOpSpan\";\n\n/**\n * A mock span useful for testing.\n */\nexport class TestSpan extends NoOpSpan {\n  /**\n   * The Span's current name\n   */\n  name: string;\n\n  /**\n   * The Span's current status\n   */\n  status: Status;\n\n  /**\n   * The Span's kind\n   */\n  kind: SpanKind;\n\n  /**\n   * True if end() has been called on the Span\n   */\n  endCalled: boolean;\n\n  /**\n   * The start time of the Span\n   */\n  readonly startTime: TimeInput;\n\n  /**\n   * The id of the parent Span, if any.\n   */\n  readonly parentSpanId?: string;\n\n  /**\n   * Known attributes, if any.\n   */\n  readonly attributes: Attributes;\n\n  private _context: SpanContext;\n  private readonly _tracer: Tracer;\n\n  /**\n   * Starts a new Span.\n   * @param parentTracer The tracer that created this Span\n   * @param name The name of the span.\n   * @param context The SpanContext this span belongs to\n   * @param kind The SpanKind of this Span\n   * @param parentSpanId The identifier of the parent Span\n   * @param startTime The startTime of the event (defaults to now)\n   */\n  constructor(\n    parentTracer: Tracer,\n    name: string,\n    context: SpanContext,\n    kind: SpanKind,\n    parentSpanId?: string,\n    startTime: TimeInput = Date.now()\n  ) {\n    super();\n    this._tracer = parentTracer;\n    this.name = name;\n    this.kind = kind;\n    this.startTime = startTime;\n    this.parentSpanId = parentSpanId;\n    this.status = {\n      code: CanonicalCode.OK\n    };\n    this.endCalled = false;\n    this._context = context;\n    this.attributes = {};\n  }\n\n  /**\n   * Returns the Tracer that created this Span\n   */\n  tracer(): Tracer {\n    return this._tracer;\n  }\n\n  /**\n   * Returns the SpanContext associated with this Span.\n   */\n  context(): SpanContext {\n    return this._context;\n  }\n\n  /**\n   * Marks the end of Span execution.\n   * @param _endTime The time to use as the Span's end time. Defaults to\n   * the current time.\n   */\n  end(_endTime?: number): void {\n    this.endCalled = true;\n  }\n\n  /**\n   * Sets a status on the span. Overrides the default of CanonicalCode.OK.\n   * @param status The status to set.\n   */\n  setStatus(status: Status): this {\n    this.status = status;\n    return this;\n  }\n\n  /**\n   * Returns whether this span will be recorded\n   */\n  isRecording(): boolean {\n    return true;\n  }\n\n  /**\n   * Sets an attribute on the Span\n   * @param key the attribute key\n   * @param value the attribute value\n   */\n  setAttribute(key: string, value: unknown): this {\n    this.attributes[key] = value;\n    return this;\n  }\n\n  /**\n   * Sets attributes on the Span\n   * @param attributes the attributes to add\n   */\n  setAttributes(attributes: Attributes): this {\n    for (const key of Object.keys(attributes)) {\n      this.attributes[key] = attributes[key];\n    }\n    return this;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}